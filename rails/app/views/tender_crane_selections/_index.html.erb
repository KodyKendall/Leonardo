<%# Reusable index list partial for tender_crane_selections %>
<%# Renders the list of selections with inline editing capabilities and summary %>
<%# Parameters: tender_crane_selections (array), on_site_mobile_crane_breakdown (object) %>

<div id="tender_crane_selections">
  <% if tender_crane_selections.any? %>
    <!-- Column Headers -->
    <div class="grid grid-cols-8 gap-2 mb-4 px-2">
      <div class="text-xs font-bold text-gray-700 uppercase tracking-wider">Tender</div>
      <div class="text-xs font-bold text-gray-700 uppercase tracking-wider">Crane</div>
      <div class="text-xs font-bold text-gray-700 uppercase tracking-wider">Purpose</div>
      <div class="text-xs font-bold text-gray-700 uppercase tracking-wider">Qty</div>
      <div class="text-xs font-bold text-gray-700 uppercase tracking-wider">Duration (Days)</div>
      <div class="text-xs font-bold text-gray-700 uppercase tracking-wider">Rate / Day (R)</div>
      <div class="text-xs font-bold text-gray-700 uppercase tracking-wider">Total Cost (R)</div>
    </div>

    <!-- Rows -->
    <div class="min-w-full divide-y divide-gray-200 space-y-5">
      <% tender_crane_selections.each do |tender_crane_selection| %>
        <div class="w-full">
          <%= render tender_crane_selection %>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-center my-10">No tender crane selections found.</p>
  <% end %>
  
  <!-- Add Row Button -->
  <div class="flex justify-end pt-4 pb-4">
    <%= form_with model: TenderCraneSelection.new, local: true, data: { turbo_stream: true } do |f| %>
      <%= f.hidden_field :tender_id, value: on_site_mobile_crane_breakdown.tender.id %>
      <%= f.hidden_field :on_site_mobile_crane_breakdown_id, value: on_site_mobile_crane_breakdown.id %>
      <%= f.submit "Add Row", class: "btn btn-primary btn-sm gap-2" %>
    <% end %>
  </div>

  <!-- Crane Cost Summary Section -->
  <turbo-frame id="crane_cost_summary">
    <%= render 'tender_crane_selections/summary', on_site_mobile_crane_breakdown: on_site_mobile_crane_breakdown %>
  </turbo-frame>
</div>
