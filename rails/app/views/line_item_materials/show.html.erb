<% content_for :title, "Material - #{@line_item_material.material_supply.name}" %>

<div class="container mx-auto p-6">
  <% if notice.present? %>
    <div class="alert alert-success mb-6">
      <i class="fas fa-check-circle"></i>
      <span><%= notice %></span>
    </div>
  <% end %>

  <div class="card bg-base-100 shadow">
    <div class="card-body">
      <h2 class="text-2xl font-bold mb-4">Material Details</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <p class="text-sm font-semibold text-gray-600">Material Supply</p>
          <p class="text-lg"><%= @line_item_material.material_supply.name %></p>
        </div>
        <div>
          <p class="text-sm font-semibold text-gray-600">Waste Percentage</p>
          <p class="text-lg"><%= number_with_precision(@line_item_material.material_supply.waste_percentage, precision: 2) %>%</p>
        </div>
        <div>
          <p class="text-sm font-semibold text-gray-600">Proportion</p>
          <p class="text-lg"><%= number_with_precision(@line_item_material.proportion * 100, precision: 2) %>%</p>
        </div>
        <div>
          <p class="text-sm font-semibold text-gray-600">Material Rate</p>
          <p class="text-lg">R <%= number_with_precision(@line_item_material.material_supply.material_supply_rates.last&.rate || 0, precision: 2) %></p>
        </div>
      </div>

      <div class="mt-6 pt-6 border-t">
        <p class="text-sm font-semibold text-gray-600">Breakdown</p>
        <p class="text-lg font-bold text-green-600">
          R <%= number_with_precision((@line_item_material.material_supply.material_supply_rates.last&.rate || 0) * @line_item_material.proportion, precision: 2) %>
        </p>
      </div>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="mt-6 flex gap-2 flex-wrap">
    <%= link_to "View Full Breakdown", line_item_material_breakdown_path(@line_item_material.line_item_material_breakdown), class: "btn btn-primary" %>
    <%= link_to "Edit", edit_line_item_material_path(@line_item_material), class: "btn btn-ghost" %>
    <%= button_to "Delete", @line_item_material, method: :delete, class: "btn btn-error", data: { turbo_confirm: "Are you sure?" } %>
    <%= link_to "Back to Materials", line_item_materials_path, class: "btn btn-ghost" %>
  </div>
</div>
